{
  "code": "import { __extends } from \"tslib\";\r\nimport Controller from \"./Controller\";\r\nimport ConstName from \"../ConstName\";\r\nimport LoadManager from \"../manager/LoadManager\";\r\nimport JsonConfig from \"../JsonConfig\";\r\nvar LoadController = (function (_super) {\r\n    __extends(LoadController, _super);\r\n    function LoadController(channel) {\r\n        var _this = _super.call(this, channel) || this;\r\n        _this._firstLoadList = [];\r\n        _this.addCommand(ConstName.ADD_TO_LOAD_LIST, _this, _this.addToLoadList);\r\n        _this.addCommand(ConstName.START_LOAD, _this, _this.startLoad);\r\n        _this.startLoad();\r\n        return _this;\r\n    }\r\n    LoadController.prototype.startLoad = function () {\r\n        if (Laya.Browser.onWeiXin) {\r\n            this._firstLoadList.push({ url: LoadManager.getUrl(\"./newFightJson.json\"), type: Laya.Loader.JSON });\r\n            Laya.loader.load(this._firstLoadList, new Laya.Handler(this, this.loadComplete));\r\n        }\r\n        else {\r\n            var script = Laya.Browser.document.createElement(\"script\");\r\n            script.src = LoadManager.getUrl(\"./newFightJson.js\");\r\n            script.onload = function () {\r\n                JsonConfig.ins.initJson();\r\n            };\r\n            script.onerror = function () {\r\n                alert(\"配置文件加载错误，请刷新重试\");\r\n            };\r\n            Laya.Browser.document.body.appendChild(script);\r\n        }\r\n    };\r\n    LoadController.prototype.addToLoadList = function (data) {\r\n        if (data.length > 0) {\r\n            for (var dataStr in data) {\r\n                this._firstLoadList.push(data[dataStr]);\r\n            }\r\n        }\r\n        else\r\n            this._firstLoadList.push(data);\r\n    };\r\n    LoadController.prototype.loadComplete = function () {\r\n        window[\"newFightJson\"] = LoadManager.getRes(\"newFightJson.json\");\r\n        JsonConfig.ins.initJson();\r\n    };\r\n    return LoadController;\r\n}(Controller));\r\nexport default LoadController;\r\n",
  "references": [
    "D:/project/canting/canting/src/game/controller/Controller.ts",
    "D:/project/canting/canting/src/game/controller/CommandChannel.ts",
    "D:/project/canting/canting/src/game/ConstName.ts",
    "D:/project/canting/canting/src/game/manager/LoadManager.ts",
    "D:/project/canting/canting/src/game/JsonConfig.ts"
  ]
}
